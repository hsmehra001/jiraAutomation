{% extends "base.html" %}

{% block title %}Process Tasks - Jira Automation{% endblock %}

{% block content %}
<div class="card">
    <h2>Process Assigned Subtasks</h2>
    <p>This tool will process all subtasks assigned to you under a parent story. It will:</p>
    <ul>
        <li>Move subtasks from "Open" to "In Progress"</li>
        <li>Log 2 hours of work (if not already logged)</li>
        <li>Move subtasks to "Completed"</li>
    </ul>

    <form id="processForm" class="mt-3">
        <div class="form-group">
            <label for="storyKey">Story Key *</label>
            <input 
                type="text" 
                id="storyKey" 
                name="storyKey" 
                placeholder="e.g., PROJ-123" 
                required
                pattern="[A-Z]+-[0-9]+"
            >
            <small>Enter the parent story key (e.g., PROJ-123)</small>
        </div>

        <div class="form-group">
            <label for="jiraPat">Jira Personal Access Token *</label>
            <input 
                type="password" 
                id="jiraPat" 
                name="jiraPat" 
                placeholder="Enter your Jira PAT" 
                required
            >
            <small>Your personal access token for Jira authentication</small>
        </div>

        <button type="submit" class="btn btn-primary">Process Tasks</button>
    </form>

    <div id="error" class="alert alert-error" style="display: none;"></div>
    <div id="results" class="results" style="display: none;"></div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/task-processor.js') }}"></script>
{% endblock %}
